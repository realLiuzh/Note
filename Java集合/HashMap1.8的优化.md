# HashMap1.8的优化

- 数组+链表->数组+链表或红黑树
- 链表的插入方式：头插法(1.7)->尾插法(1.8)
- 扩容不同：1.7大于等于阈值且桶不为空才扩容；1.8大于阈值就扩容
- 扩容计算索引优化：扩容时1.7会对原数组中的元素进行重新hash计算新索引；1.8采用更简单的判断逻辑，位置不变或索引+旧容量大小