# HashMap桶的容量为何为2的n次方幂

第一个原因，计算索引值使用位运算效率更高。

第二个原因。

扩容时，需要重新计算元素的哈希值。

- 如果二次hash值&原始容量=0，那么扩容后还在原来位置。
- 否则，新位置=老位置+老容量。

你可能以为这是魔法，但

2^n的桶容量就是这样的。