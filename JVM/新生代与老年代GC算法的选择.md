# 新生代与老年代GC算法的选择

我们都知道新生代使用的是标记复制GC算法，老年代使用的是标记整理GC算法。JVM为什么要这么设计呢？

我们先来讨论一下新生代和老年代这两个分区里对象的特性。根据分代收集理论我们不难知道：

- 新生代里90%以上都是朝生夕灭的对象。
- 老年代中都是难以消亡的对象，甚至某些对象的生命周期与JVM相同。

接下来我们再来讨论一下复制和整理算法的特点。

先来看复制。

1. 速度快。这是它的一个优点。
2. 需要占用两倍的内存。这是缺点。

这样我们就可以推测出复制算法所适用的场景：只有少部分对象存活。

> 这里可能有点难以理解。
>
> 举个例子，如果说每次GC都有80%以上的对象存活。你把这么多对象复制来复制去没意思。
>
> 还不如使用整理算法。
>
> 如果有80%以上的对象存活，那么整理算法是非常高效的。因为很多对象都不需要移动。

再来看整理。

1. 算法效率没有复制高。
2. 但是**在存活对象多的场景下不一定比复制慢哦**

总结一下。

1. 上面我们讨论了GC分区的特点和算法的优劣势。

2. 新生代中存活对象很少，老年代中存活对象占绝大部分。

3. 复制适用于存活对象很少的场景，整理适用于存活对象很多的场景。

   感觉到这儿GC算法选择的原理已经不言而喻了。