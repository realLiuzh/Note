# CMS的特点

CMS是一种并发收集、以获取最短停顿时间的垃圾回收器。

CMS使用的算法是标记清除。

在CMS垃圾回收过程中，耗时最长的并发标记和并发清除的阶段，垃圾收集器线程都可以和用户线程并发进行。所以，在总体上看，CMS的垃圾收集工作和用户线程是一起并发进行的。

在整个CMS垃圾回收过程中，只有初始标记和重新标记需要STW。并且这两个阶段速度很快。

但是CMS有几个明显的缺点：

对CPU资源敏感。CMS虽然不会导致用户线程停顿，但是会因为占用一部分CPU资源，导致用户程序变慢。

无法处理浮动垃圾并且可能出现并发失败进而导致一次完全的STW的Full GC。在标记阶段后，用户进程产生的垃圾就是浮动垃圾。如果CMS在运行期间预留的内存无法满足程序分配内存的需要，就会触发并发失败而导致：启用完全STW的Serial Old垃圾收集器完成收集。

内存碎片，可能会导致内存空间不足所触发full GC。为了解决这个问题，CMS会在full GC前对碎片进行整理。由于整理需要移动对象，所以整理过程需要STW。

